---
import { SITE_TITLE } from '../consts';
---

<header id="inicio" class="max-w-[1200px] mx-auto px-8 py-8">
  <div class="flex justify-between items-center">
    <!-- Logo -->
    <a href="/">
      <h2 class="text-white text-2xl font-bold hover:text-accent-yellow transition">
        {SITE_TITLE}
      </h2>
    </a>
    
    <!-- Mobile menu button -->
    <button 
      id="open" 
      class="md:hidden text-white text-4xl border-0 bg-transparent cursor-pointer"
      aria-label="Abrir menú"
    >
      <i class="bi bi-list"></i>
    </button>
    
    <!-- Desktop Navigation -->
    <nav id="navbar" class="navbar hidden md:flex">
      <button 
        id="close" 
        class="navbar__close-button--mobile hidden text-white text-4xl border-0 bg-transparent cursor-pointer"
        aria-label="Cerrar menú"
      >
        <i class="bi bi-x"></i>
      </button>
      
      <ul class="flex items-center gap-0 navbar__menu">
        <li class="list-none">
          <a 
            href="#inicio" 
            class="navbar__menu__item text-white no-underline mx-7 text-xl transition-all hover:text-accent-yellow"
          >
            Inicio
          </a>
        </li>
        <li class="list-none">
          <a 
            href="#proyectos" 
            class="navbar__menu__item text-white no-underline mx-7 text-xl transition-all hover:text-accent-yellow"
          >
            Proyectos
          </a>
        </li>
        <li class="list-none">
          <a 
            href="#sobre-mi" 
            class="navbar__menu__item text-white no-underline mx-7 text-xl transition-all hover:text-accent-yellow"
          >
            Sobre mí
          </a>
        </li>
        <li class="list-none">
          <a 
            href="#contacto" 
            class="navbar__menu__item text-white no-underline mx-7 text-xl transition-all hover:text-accent-yellow"
          >
            Contacto
          </a>
        </li>
        <li class="list-none">
          <a 
            href="/blog" 
            class="navbar__menu__item text-white no-underline mx-7 text-xl transition-all hover:text-accent-yellow"
          >
            Blog
          </a>
        </li>
      </ul>
    </nav>
  </div>
</header>

<style>
  /* Mobile menu styles */
  @media (max-width: 768px) {
    .navbar {
      display: flex;
      flex-direction: column;
      align-items: flex-end;
      gap: 1rem;
      position: fixed;
      top: 0;
      right: 0;
      bottom: 0;
      background-color: #000000;
      padding: 2rem 2rem 0.5rem 4.3rem;
      box-shadow: 0 0 0 1000vmax rgba(0, 0, 0, 0.4);
      transform: translateX(100%);
      transition: transform 0.3s ease, opacity 0.3s ease;
      opacity: 0;
      visibility: hidden;
      z-index: 1000;
    }
    
    .navbar.visible {
      opacity: 1;
      visibility: visible;
      transform: translateX(0);
    }
    
    .navbar__menu {
      flex-direction: column;
      align-items: flex-end;
      line-height: 3rem;
    }
    
    .navbar__close-button--mobile {
      display: block !important;
    }
  }
</style>

<script>
  const nav = document.querySelector("#navbar");
  const openNav = document.querySelector("#open");
  const closeNav = document.querySelector("#close");
  const menuItems = document.querySelectorAll('.navbar__menu__item');

  openNav?.addEventListener("click", () => {
    nav?.classList.add("visible");
  });

  closeNav?.addEventListener("click", () => {
    nav?.classList.remove("visible");
  });

  menuItems.forEach((item) => {
    item.addEventListener("click", () => {
      nav?.classList.remove("visible");
    });
  });

  document.addEventListener('click', (event) => {
    const target = event.target as Node;
    if (!nav?.contains(target) && !openNav?.contains(target)) {
      nav?.classList.remove("visible");
    }
  });
</script>
